import{a as N}from"./cartStore-TanCCHxI.js";import{_ as B}from"./HeaderComponent-PB81O0f2.js";import{_ as A}from"./FooterComponent-czLGoVoS.js";import{b as a,c as n,d as e,n as C,F as y,f as $,t as _,l as D,s as L,r as x,o as M,a as S,e as v,i as H,j as P,w as T,g as q}from"./index-Sq6k6q8w.js";import"https://cdn.jsdelivr.net/npm/sweetalert2@11.10.6/+esm";const z={class:"pagination justify-content-center align-items-center"},F=e("span",{"aria-hidden":"true"},"«",-1),G=[F],W=["onClick"],R=e("span",{"aria-hidden":"true"},"»",-1),U=[R],Y={__name:"PageComponent",props:["pagination"],setup(p){return(b,r)=>{var h,m,g;return a(),n("ul",z,[e("li",{class:C(["page-item",(h=p.pagination)!=null&&h.has_pre?"d-block":"d-none"])},[e("button",{class:"page-link rounded-0",type:"button","aria-label":"Previous",onClick:r[0]||(r[0]=i=>{var s;return b.$emit("page",((s=p.pagination)==null?void 0:s.current_page)-1)})},G)],2),(a(!0),n(y,null,$((m=p.pagination)==null?void 0:m.total_pages,i=>{var s;return a(),n("li",{class:C(["page-item",((s=p.pagination)==null?void 0:s.current_page)===i?"active":""]),key:"page"+i},[e("button",{class:"page-link rounded-0",href:"#",onClick:f=>b.$emit("page",i)},_(i),9,W)],2)}),128)),e("li",{class:C(["page-item",(g=p.pagination)!=null&&g.has_next?"d-block":"d-none"])},[e("button",{class:"page-link rounded-0",type:"button","aria-label":"Next",onClick:r[1]||(r[1]=i=>{var s;return b.$emit("page",((s=p.pagination)==null?void 0:s.current_page)+1)})},U)],2)])}}},Z={class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},I=e("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1538438253612-287c9fc9217e?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D)","background-position":"center center",opacity:"0.6"}},null,-1),J={class:"fw-bold text-uppercase"},K={class:"container mt-md-5 mt-3 mb-7"},O={class:"row"},Q={class:"col-md-4"},X={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},ee={class:"card cursor-pointer border-0"},te=e("div",{class:"d-flex justify-content-between align-items-center pe-1"},[e("h5",{class:"mb-0 text-uppercase"},"ALL")],-1),oe=[te],se={class:"card cursor-pointer border-0"},ae=e("div",{class:"d-flex justify-content-between align-items-center pe-1"},[e("h5",{class:"mb-0 text-uppercase"},"NEW")],-1),ne=[ae],re=["data-bs-target"],ie={class:"d-flex justify-content-between align-items-center pe-1"},ce={class:"mb-0 text-uppercase"},de={key:0,class:"fas fa-chevron-down cursor-pointer"},le=["id"],ue={class:"card-body py-0"},pe={class:"list-unstyled"},he={class:"col-md-8"},_e={class:"row"},ge={class:"card border-0 mb-4 position-relative"},be=["src","alt"],me={class:"card-body cursor-pointer p-0 px-3"},fe={class:"mb-0 mt-3"},ve={class:"card-text fs-5 text-danger"},ye={class:"text-muted ms-2"},Pe={__name:"ProductsView",setup(p){const b=D(),{isLoading:r}=L(b),h=x(null),m=x(null),g=x(!0);function i(l=1){r.value=!0;const o=`https://vue3-course-api.hexschool.io//v2/api/rongapi/products/?page=${l}`;N.get(o).then(c=>{c.data.success&&(h.value=c.data.products,m.value=c.data.pagination),r.value=!1})}const s=[{name:"men",childNodes:[]},{name:"female",childNodes:[]},{name:"baby",childNodes:[]}],f=x(!1);function E(){r.value=!0,f.value=!1,N.get("https://vue3-course-api.hexschool.io//v2/api/rongapi/products/all").then(o=>{o.data.success&&(o.data.products.forEach(c=>{const t=c.category.split(","),d=t.filter(u=>u.match(/[a-zA-Z]/));s.forEach((u,V)=>{if(u.name===d[0]){const j=t.filter(w=>w.match(/[\u4e00-\u9fa5]/));s[V].childNodes.findIndex(w=>w===j[0])===-1&&s[V].childNodes.push(j[0])}})}),f.value=!0),r.value=!1}).catch(o=>{console.error("productsView-getTabs出錯",o),r.value=!1})}M(()=>{i(),E()});function k(l,o){l==="all"?(g.value=!0,i()):(g.value=!1,N.get("https://vue3-course-api.hexschool.io//v2/api/rongapi/products/all").then(t=>{if(t.data.success)if(o){const d=t.data.products.filter(u=>u.category.match(o));h.value=d.filter(u=>u.category.match(l))}else h.value=t.data.products.filter(d=>d.category.match(l))}).catch(t=>{console.error("productsView-filterProducts出錯",t)}))}return(l,o)=>{const c=S("router-link");return a(),n(y,null,[v(B),e("main",null,[e("div",Z,[I,e("h2",J,_(l.$route.name),1)]),e("div",K,[e("div",O,[e("div",Q,[e("div",X,[e("div",ee,[e("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",onClick:o[0]||(o[0]=t=>k("all"))},oe)]),e("div",se,[e("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",onClick:o[1]||(o[1]=t=>k("新品"))},ne)]),(a(),n(y,null,$(s,t=>e("div",{class:"card cursor-pointer border-0",key:t.name},[e("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0","data-bs-toggle":"collapse","data-bs-target":`#${t.name}`},[e("div",ie,[e("h5",ce,_(t.name),1),f.value?(a(),n("i",de)):P("",!0)])],8,re),f.value?(a(),n("div",{key:0,id:t.name,class:"collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},[e("div",ue,[e("ul",pe,[(a(!0),n(y,null,$(t.childNodes,d=>(a(),n("li",{key:d},[v(c,{to:{name:"products",query:{tabName:d}},class:"py-2 d-block text-muted",onClick:u=>k(d,t.name)},{default:T(()=>[q(_(d),1)]),_:2},1032,["to","onClick"])]))),128))])])],8,le)):P("",!0)])),64))])]),e("div",he,[e("div",_e,[(a(!0),n(y,null,$(h.value,t=>(a(),n("div",{class:"col-md-6",key:t.id},[e("div",ge,[v(c,{to:{name:"product",params:{productId:t.id}}},{default:T(()=>[e("img",{src:t.imageUrl,class:"card-img-top rounded-0 cursor-pointer",alt:t.id},null,8,be)]),_:2},1032,["to"]),e("div",me,[v(c,{class:"text-decoration-none",to:{name:"product",params:{productId:t.id}}},{default:T(()=>[e("h4",fe,_(t.title),1),e("span",ve,"NT$ "+_(t.price),1),e("span",ye,[e("del",null,"NT$ "+_(t.origin_price),1)])]),_:2},1032,["to"])])])]))),128))]),g.value?(a(),H(Y,{key:0,pagination:m.value,onPage:i},null,8,["pagination"])):P("",!0)])])])]),v(A)],64)}}};export{Pe as default};
