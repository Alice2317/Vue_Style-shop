import{r as i,l as K,s as A,E as Q,k as W,a as g,b as r,c as u,d as e,e as l,w as y,F as V,f as N,m as p,t as m,h as X,g as _,n,p as Y,v as Z,G as E,j as ee}from"./index-Sq6k6q8w.js";import{c as se,a as F}from"./cartStore-TanCCHxI.js";import{t as I,_ as te}from"./FooterComponent-czLGoVoS.js";import{c as ae}from"./methods-0ip-SXLq.js";import"https://cdn.jsdelivr.net/npm/sweetalert2@11.10.6/+esm";const le=[{總行代號:5,銀行別:"臺灣土地銀行國際金融業務分行"},{總行代號:6,銀行別:"合作金庫商業銀行國際金融業務分行"},{總行代號:7,銀行別:"第一商業銀行國際金融業務分行"},{總行代號:8,銀行別:"華南商業銀行國際金融業務分行"},{總行代號:9,銀行別:"彰化商業銀行國際金融業務分行"},{總行代號:11,銀行別:"上海商業儲蓄銀行國際金融業務分行"},{總行代號:12,銀行別:"台北富邦商業銀行國際金融業務分行"},{總行代號:13,銀行別:"國泰世華商業銀行國際金融業務分行"},{總行代號:15,銀行別:"中國輸出入銀行國際金融業務分行"},{總行代號:16,銀行別:"高雄銀行國際金融業務分行"},{總行代號:17,銀行別:"兆豐國際商銀國際金融業務分行"},{總行代號:21,銀行別:"花旗(台灣)商業銀行國際金融業務分行"},{總行代號:48,銀行別:"王道商業銀行股份有限公司國際金融業務分行"},{總行代號:50,銀行別:"臺灣中小企業銀行國際金融業務分行"},{總行代號:52,銀行別:"渣打國際商業銀行國際金融業務分行"},{總行代號:53,銀行別:"台中商業銀行國際金融業務分行"},{總行代號:54,銀行別:"京城商業銀行國際金融業務分行"},{總行代號:81,銀行別:"滙豐(台灣)商業銀行國際金融業務分行"},{總行代號:101,銀行別:"瑞興商業銀行國際金融業務分行"},{總行代號:102,銀行別:"華泰商業銀行國際金融業務分行"},{總行代號:103,銀行別:"臺灣新光商業銀行國際金融業務分行"},{總行代號:108,銀行別:"陽信商業銀行國際金融業務分行"},{總行代號:118,銀行別:"板信商業銀行國際金融業務分行"},{總行代號:147,銀行別:"三信商業銀行國際金融業務分行"},{總行代號:803,銀行別:"聯邦商業銀行國際金融業務分行"},{總行代號:805,銀行別:"遠東國際商業銀行國際金融業務分行"},{總行代號:806,銀行別:"元大商業銀行國際金融業務分行"},{總行代號:807,銀行別:"永豐商業銀行國際金融業務分行"},{總行代號:808,銀行別:"玉山銀行國際金融業務分行"},{總行代號:809,銀行別:"凱基商業銀行國際金融業務分行"},{總行代號:810,銀行別:"星展(台灣)商業銀行國際金融業務分行"},{總行代號:812,銀行別:"台新國際商業銀行國際金融業務分行"},{總行代號:816,銀行別:"安泰商業銀行國際金融業務分行"},{總行代號:822,銀行別:"中國信託商業銀行國際金融業務分行"}],oe={class:"container"},ne={class:"row justify-content-center"},de={class:"col-md-10"},ce={class:"navbar navbar-expand-lg navbar-light px-0"},ie=X('<ul class="list-unstyled mb-0 ms-md-auto d-flex align-items-center justify-content-between justify-content-md-end w-100 px-2 px-sm-6 px-md-0 mt-md-0 mt-4"><li class="me-md-6 me-3 position-relative custom-step-line"><i class="fas fa-check-circle d-md-inline d-block text-center me-2"></i><span class="text-nowrap">訂單確認</span></li><li class="me-md-6 me-3 position-relative custom-step-line"><i class="fas fa-dot-circle d-md-inline d-block text-center me-2"></i><span class="text-nowrap">資料填寫</span></li><li><i class="fas fa-dot-circle d-md-inline d-block text-center me-2"></i><span class="text-nowrap">交易結果</span></li></ul>',1),re=e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-10"},[e("h3",{class:"fw-bold mb-4 pt-3"},"資料填寫")])],-1),ue={class:"row flex-row-reverse justify-content-center pb-5"},me={class:"col-md-4"},pe={class:"border p-4 mb-4"},_e=["src","alt"],ve={class:"w-100"},he={class:"d-flex justify-content-between"},fe={class:"mb-0 fw-bold"},be={class:"mb-0"},xe={class:"mb-0 fw-bold"},we={class:"table mt-4 border-top border-bottom text-muted"},ge=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 總金額 ",-1),ye={class:"text-end border-0 px-0 pt-4"},Ve=e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣價 ",-1),ke={class:"text-end border-0 px-0 pt-0 pb-4"},Ce={class:"d-flex justify-content-between mt-4"},$e=e("p",{class:"mb-0 h4 fw-bold"},"Total",-1),Ne={class:"mb-0 h4 fw-bold"},Te={class:"col-md-6"},Me={class:"mb-2"},je=e("label",{for:"ContactMail",class:"text-muted mb-0"},[_("Email"),e("span",{class:"text-danger fw-bold"},"*")],-1),Ue={class:"mb-2"},qe=e("label",{for:"ContactAddress",class:"text-muted mb-0"},[_("地址"),e("span",{class:"text-danger fw-bold"},"*")],-1),Pe={class:"mb-2"},Se=e("label",{for:"ContactName",class:"text-muted mb-0"},[_("姓名"),e("span",{class:"text-danger fw-bold"},"*")],-1),Ae={class:"mb-2"},Ee=e("label",{for:"ContactPhone",class:"text-muted mb-0"},[_("電話"),e("span",{class:"text-danger fw-bold"},"*")],-1),Fe={class:"mb-2"},Ie=e("label",{for:"ContactMessage",class:"text-muted mb-0"},"備註",-1),Le=e("p",{class:"m-0"},[_(" 付款方式"),e("span",{class:"text-danger fw-bold"},"*")],-1),Be={class:"accordion",id:"accordionExample"},De={class:"card rounded-0"},Oe={class:"card-header bg-white border-0 py-3",id:"headingOne","aria-expanded":"true","aria-controls":"collapseOne"},Re={class:"card rounded-0"},ze={class:"card-header bg-white border-0 py-3",id:"headingTwo","aria-expanded":"true","aria-controls":"collapseTwo"},Ge={key:0,class:"card-body bg-light py-4"},He={class:"mb-2"},Je=e("label",{for:"Lorem ipsum2",class:"text-muted mb-0"},"選擇銀行",-1),Ke=e("option",{selected:"",value:"4 臺灣銀行國際金融業務分行"}," 4 臺灣銀行國際金融業務分行 ",-1),Qe=["value"],We={class:"mb-2"},Xe=e("p",{class:"m-0"},"信用卡號",-1),Ye={class:"row row-cols-2 row-cols-md-4 g-2"},Ze={class:"mb-2"},es=e("p",{class:"m-0"},"信用卡時間",-1),ss={class:"input-group mb-3"},ts=e("span",{class:"input-group-text bg-light border-0"},"/",-1),as={class:"mb-0"},ls=e("p",{class:"m-0"},"信用卡安全碼",-1),os={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},ns=e("i",{class:"fas fa-chevron-left me-2"},null,-1),ds=e("button",{type:"submit",class:"btn btn-dark py-3 px-7"}," 確認付款 ",-1),_s={__name:"PayView",setup(cs){const k=i(ae),L=K(),{isLoading:T}=A(L),M=se(),{finalTotal:C,carts:B,total:$}=A(M),{getCarts:D}=M;Q(()=>D());const O=W(),d=i({email:"",tel:"",name:"",address:""}),h=i(null);function R(c){return/^(09)[0-9]{8}$/.test(c)?!0:"需要正確的電話號碼"}async function z(c){let s=!1;return await F.post("https://vue3-course-api.hexschool.io//v2/api/rongapi/order",{data:{user:d.value,message:h.value}}).then(a=>{a.data.success?(S(a.data.orderId),s=!0):s=!1}).catch(a=>{console.error("payView-userAPI出錯",a)}),s}const f=i(!1);function j(c){f.value=c}const U=i(["5465","4465","5466","5645"]),b=i(["04","12"]),q=i("486"),G=i(le),P=i("4 臺灣銀行國際金融業務分行");async function S(c){let s=!1;const v=`https://vue3-course-api.hexschool.io//v2/api/rongapi/pay/${c}`;return await F.post(v).then(a=>{a.data.success?s=!0:s=!1}).catch(a=>{console.error("payView-payAPI出錯",a)}),s}async function H(){T.value=!1;const c=await z(),s=await S();c===!0&&s===!0?(T.value=!0,I(!0,"交易成功，正在跳轉至交易明細頁面"),setTimeout(()=>{d.value={name:"",email:"",tel:"",address:""},h.value=""},5e3),O.push({name:"order"})):I(!1,"失敗，請重新操作")}return(c,s)=>{const v=g("router-link"),a=g("VField"),x=g("ErrorMessage"),J=g("VForm");return r(),u(V,null,[e("main",oe,[e("div",ne,[e("div",de,[e("nav",ce,[l(v,{class:"navbar-brand ff-serif",to:"/"},{default:y(()=>[_("style")]),_:1}),ie])])]),re,e("div",ue,[e("div",me,[e("div",pe,[(r(!0),u(V,null,N(p(B),o=>(r(),u("div",{class:"d-flex mt-2",key:o.id},[e("img",{src:o.product.imageUrl,alt:o.product.id,class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,_e),e("div",ve,[e("div",he,[e("p",fe,m(o.product.title),1),e("p",be,"NT$ "+m(o.product.price),1)]),e("p",xe,"x "+m(o.qty),1)])]))),128)),e("table",we,[e("tbody",null,[e("tr",null,[ge,e("td",ye," NT$ "+m(k.value(p($))),1)]),e("tr",null,[Ve,e("td",ke," NT$ "+m(p(C)-p($)===0?0:k.value(Math.round(p(C)-p($)))),1)])])]),e("div",Ce,[$e,e("p",Ne," NT$ "+m(k.value(Math.round(p(C)))),1)])])]),e("div",Te,[l(J,{onSubmit:H},{default:y(({errors:o})=>[e("div",Me,[je,l(a,{type:"email",class:n(["form-control",{"is-invalid":o.email}]),id:"ContactMail",name:"email",placeholder:"請輸入EMAIL",rules:"email|required",modelValue:d.value.email,"onUpdate:modelValue":s[0]||(s[0]=t=>d.value.email=t)},null,8,["class","modelValue"]),l(x,{class:"invalid-feedback",name:"email"})]),e("div",Ue,[qe,l(a,{type:"text",class:n(["form-control",{"is-invalid":o.地址}]),id:"ContactAddress",name:"地址",placeholder:"請輸入地址",rules:"required",modelValue:d.value.address,"onUpdate:modelValue":s[1]||(s[1]=t=>d.value.address=t)},null,8,["class","modelValue"]),l(x,{class:"invalid-feedback",name:"地址"})]),e("div",Pe,[Se,l(a,{type:"text",class:n(["form-control",{"is-invalid":o.姓名}]),id:"ContactName",placeholder:"請輸入姓名",name:"姓名",rules:"required",modelValue:d.value.name,"onUpdate:modelValue":s[2]||(s[2]=t=>d.value.name=t)},null,8,["class","modelValue"]),l(x,{class:"invalid-feedback",name:"姓名"})]),e("div",Ae,[Ee,l(a,{type:"text",class:n(["form-control",{"is-invalid":o.電話}]),id:"ContactPhone",name:"電話",placeholder:"請輸入電話",rules:R,modelValue:d.value.tel,"onUpdate:modelValue":s[3]||(s[3]=t=>d.value.tel=t)},null,8,["class","modelValue"]),l(x,{class:"invalid-feedback",name:"電話"})]),e("div",Fe,[Ie,Y(e("textarea",{class:"form-control",rows:"3",id:"ContactMessage","onUpdate:modelValue":s[4]||(s[4]=t=>h.value=t)},null,512),[[Z,h.value]])]),e("div",null,[Le,e("div",Be,[e("div",De,[e("div",Oe,[e("p",{class:n(["mb-0 position-relative custom-checkout-label",f.value?"":"show"]),onClick:s[5]||(s[5]=E(t=>j(!1),["self"]))}," 現金付款 ",2)])]),e("div",Re,[e("div",ze,[e("p",{class:n(["mb-0 position-relative custom-checkout-label",f.value?"show":""]),onClick:s[6]||(s[6]=E(t=>j(!0),["self"]))}," 信用卡付款 ",2)]),f.value?(r(),u("div",Ge,[e("div",He,[Je,l(a,{id:"bank",name:"銀行",class:n(["form-control",{"is-invalid":o.銀行}]),rules:"required",modelValue:P.value,"onUpdate:modelValue":s[7]||(s[7]=t=>P.value=t),as:"select"},{default:y(()=>[Ke,(r(!0),u(V,null,N(G.value,t=>(r(),u("option",{key:t,value:t},m(t.總行代號)+" "+m(t.銀行別),9,Qe))),128))]),_:2},1032,["class","modelValue"])]),e("div",We,[Xe,e("div",Ye,[(r(!0),u(V,null,N(U.value,(t,w)=>(r(),u("div",{class:"col",key:`${t}${w}`},[l(a,{type:"text",class:n(["form-control",{"is-invalid":o[`信用卡號${w}`]}]),name:`信用卡號${w}`,placeholder:"請輸入信用卡號",rules:"required|numeric|length:4",maxlength:"4",value:U.value[`${w}`]},null,8,["class","name","value"])]))),128))])]),e("div",Ze,[es,e("div",ss,[l(a,{type:"text",name:"時間1",placeholder:"請輸入時間",rules:"required|numeric|length:2",class:n([{"is-invalid":o.時間1},"form-control rounded"]),maxlength:"2",modelValue:b.value[0],"onUpdate:modelValue":s[8]||(s[8]=t=>b.value[0]=t)},null,8,["class","modelValue"]),ts,l(a,{type:"text",name:"時間2",placeholder:"請輸入時間",rules:"required|numeric|length:2",class:n([{"is-invalid":o.時間2},"form-control rounded"]),maxlength:"2",modelValue:b.value[1],"onUpdate:modelValue":s[9]||(s[9]=t=>b.value[1]=t)},null,8,["class","modelValue"])])]),e("div",as,[ls,l(a,{name:"安全碼",type:"text",placeholder:"請輸入安全碼",class:n(["form-control",{"is-invalid":o.安全碼}]),rules:"required|numeric|length:3",maxlength:"3",modelValue:q.value,"onUpdate:modelValue":s[10]||(s[10]=t=>q.value=t)},null,8,["class","modelValue"])])])):ee("",!0)])])]),e("div",os,[l(v,{to:{name:"cart"},class:"text-dark mt-md-0 mt-3"},{default:y(()=>[ns,_(" 上一步")]),_:1}),ds])]),_:1})])])]),l(te)],64)}}};export{_s as default};
